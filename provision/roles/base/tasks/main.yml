---
    - name: Update apt cache
      apt: update-cache=yes cache_valid_time=86400
      sudo: yes
      when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'

    - name: Update all packages
      apt: upgrade=dist
      sudo: yes
      when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'

    - name: install basic packages
      sudo: yes
      apt: pkg={{ item }} state=latest
      tags: [packages]
      with_items:
        - curl
        - cmake
        #- python-httplib2
        - vim
        - zip
        - unzip
        - python-dev
        - automake
        - libtool
        #- python-psycopg2
        #- apg
        #- mercurial
        - git
        - libssl-dev
        - libxslt1-dev
        - libxml2-dev
        #- libboost-dev
        #- libevent-2.0-5
        #- libevent-dev
      when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'

    - name: install basic packages
      sudo: yes
      yum: pkg={{ item }} state=latest
      tags: [packages]
      with_items:
        - curl
        - cmake
        #- python-httplib2
        - vim
        - zip
        - unzip
        - python-dev
        - automake
        - libtool
        #- python-psycopg2
        #- apg
        #- mercurial
        - git
        - libssl-dev
        - libxslt1-dev
        - libxml2-dev
        #- libboost-dev
        #- libevent-2.0-5
        #- libevent-dev
      when: ansible_distribution == 'CentOS' or ansible_distribution == 'Red Hat Enterprise Linux'

    - name: Ensure that ansible_cache_dir directory exists
      file: path={{ ansible_cache_dir }} state=directory
      sudo: yes
